ifeq  ($(KERNELRELEASE),) #如果KERNERLRELEASE为空
	KERNELDIR ?= /linux-5.3.0/linux-source-5.3.0 #安装的内核的源码路径
	PWD := $(shell pwd)
modules: #模块编译
	$(MAKE) -C $(KERNELDIR) M=$(PWD) modules
modules_install:
	$(MAKE) -C $(KERNELDIR) M=$(PWD) modules_install
clean:
	rm -rf  *.o  *~ core .depend .*.cmd *.ko *.mod.c .tmp_versions
else #生成中间文件（名字一定要与.c文件相同）
	obj-m :=  hello_demo.o
endif
